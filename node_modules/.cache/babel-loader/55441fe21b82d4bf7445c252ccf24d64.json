{"remainingRequest":"/Users/lizhigang/Documents/my-world/v-org-tree/node_modules/babel-loader/lib/index.js!/Users/lizhigang/Documents/my-world/v-org-tree/node_modules/eslint-loader/index.js??ref--13-0!/Users/lizhigang/Documents/my-world/v-org-tree/src/components/org-tree/node.js","dependencies":[{"path":"/Users/lizhigang/Documents/my-world/v-org-tree/src/components/org-tree/node.js","mtime":1545539391745},{"path":"/Users/lizhigang/Documents/my-world/v-org-tree/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/lizhigang/Documents/my-world/v-org-tree/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/lizhigang/Documents/my-world/v-org-tree/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":["// 判断是否叶子节点\nvar isLeaf = function isLeaf(data, prop) {\n  return !(Array.isArray(data[prop]) && data[prop].length > 0);\n}; // 创建 node 节点\n\n\nexport var renderNode = function renderNode(h, data, context) {\n  var props = context.props;\n  var cls = ['org-tree-node'];\n  var childNodes = [];\n  var children = data[props.props.children];\n\n  if (isLeaf(data, props.props.children)) {\n    cls.push('is-leaf');\n  } else if (props.collapsable && !data[props.props.expand]) {\n    cls.push('collapsed');\n  }\n\n  childNodes.push(renderLabel(h, data, context));\n\n  if (!props.collapsable || data[props.props.expand]) {\n    childNodes.push(renderChildren(h, children, context));\n  }\n\n  return h('div', {\n    domProps: {\n      className: cls.join(' ')\n    }\n  }, childNodes);\n}; // 创建展开折叠按钮\n\nexport var renderBtn = function renderBtn(h, data, context) {\n  var props = context.props;\n  var expandHandler = context.listeners['on-expand'];\n  var cls = ['org-tree-node-btn'];\n\n  if (data[props.props.expand]) {\n    cls.push('expanded');\n  }\n\n  return h('span', {\n    'class': 'org-tree-button-wrapper',\n    on: {\n      click: function click(e) {\n        e.stopPropagation();\n        expandHandler && expandHandler(data);\n      }\n    }\n  }, [props.buttonRender ? props.buttonRender(h, data) : h('span', {\n    'class': cls.join(' ')\n  })]);\n}; // 创建 label 节点\n\nexport var renderLabel = function renderLabel(h, data, context) {\n  var props = context.props;\n  var label = data[props.props.label];\n  var nodeRender = props.nodeRender;\n  var clickHandler = context.listeners['on-node-click'];\n  var childNodes = [];\n\n  if (typeof nodeRender === 'function') {\n    var vnode = nodeRender(h, data);\n    vnode && childNodes.push(vnode);\n  } else {\n    childNodes.push(label);\n  }\n\n  if (props.collapsable && !isLeaf(data, props.props.children)) {\n    childNodes.push(renderBtn(h, data, context));\n  }\n\n  var cls = ['org-tree-node-label-inner'];\n  var labelWidth = props.labelWidth,\n      labelClassName = props.labelClassName;\n\n  if (typeof labelWidth === 'number') {\n    labelWidth += 'px';\n  }\n\n  if (typeof labelClassName === 'function') {\n    labelClassName = labelClassName(data);\n  }\n\n  labelClassName && cls.push(labelClassName);\n  return h('div', {\n    domProps: {\n      className: 'org-tree-node-label'\n    }\n  }, [h('div', {\n    domProps: {\n      className: cls.join(' ')\n    },\n    style: {\n      width: labelWidth\n    },\n    on: {\n      click: function click(e) {\n        return clickHandler && clickHandler(e, data);\n      }\n    }\n  }, childNodes)]);\n}; // 创建 node 子节点\n\nexport var renderChildren = function renderChildren(h, list, context) {\n  if (Array.isArray(list) && list.length) {\n    var children = list.map(function (item) {\n      return renderNode(h, item, context);\n    });\n    return h('div', {\n      domProps: {\n        className: 'org-tree-node-children'\n      }\n    }, children);\n  }\n\n  return '';\n};\nexport var render = function render(h, context) {\n  var props = context.props;\n  return renderNode(h, props.data, context);\n};\nexport default render;",{"version":3,"sources":["/Users/lizhigang/Documents/my-world/v-org-tree/src/components/org-tree/node.js"],"names":["isLeaf","data","prop","Array","isArray","length","renderNode","h","context","props","cls","childNodes","children","push","collapsable","expand","renderLabel","renderChildren","domProps","className","join","renderBtn","expandHandler","listeners","on","click","e","stopPropagation","buttonRender","label","nodeRender","clickHandler","vnode","labelWidth","labelClassName","style","width","list","map","item","render"],"mappings":"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","sourcesContent":["// 判断是否叶子节点\nconst isLeaf = (data, prop) => {\n  return !(Array.isArray(data[prop]) && data[prop].length > 0)\n}\n\n// 创建 node 节点\nexport const renderNode = (h, data, context) => {\n  const { props } = context\n  const cls = ['org-tree-node']\n  const childNodes = []\n  const children = data[props.props.children]\n\n  if (isLeaf(data, props.props.children)) {\n    cls.push('is-leaf')\n  } else if (props.collapsable && !data[props.props.expand]) {\n    cls.push('collapsed')\n  }\n\n  childNodes.push(renderLabel(h, data, context))\n\n  if (!props.collapsable || data[props.props.expand]) {\n    childNodes.push(renderChildren(h, children, context))\n  }\n\n  return h('div', {\n    domProps: {\n      className: cls.join(' ')\n    }\n  }, childNodes)\n}\n\n// 创建展开折叠按钮\nexport const renderBtn = (h, data, context) => {\n  const { props } = context\n  const expandHandler = context.listeners['on-expand']\n\n  let cls = ['org-tree-node-btn']\n\n  if (data[props.props.expand]) {\n    cls.push('expanded')\n  }\n\n  return h('span', {\n    'class': 'org-tree-button-wrapper',\n    on: {\n      click: e => {\n        e.stopPropagation()\n        expandHandler && expandHandler(data)\n      }\n    }\n  }, [\n    props.buttonRender\n      ? props.buttonRender(h, data)\n      : h('span', {\n        'class': cls.join(' ')\n      })\n  ])\n}\n\n// 创建 label 节点\nexport const renderLabel = (h, data, context) => {\n  const { props } = context\n  const label = data[props.props.label]\n  const nodeRender = props.nodeRender\n  const clickHandler = context.listeners['on-node-click']\n\n  const childNodes = []\n  if (typeof nodeRender === 'function') {\n    let vnode = nodeRender(h, data)\n\n    vnode && childNodes.push(vnode)\n  } else {\n    childNodes.push(label)\n  }\n\n  if (props.collapsable && !isLeaf(data, props.props.children)) {\n    childNodes.push(renderBtn(h, data, context))\n  }\n\n  const cls = ['org-tree-node-label-inner']\n  let { labelWidth, labelClassName } = props\n  if (typeof labelWidth === 'number') {\n    labelWidth += 'px'\n  }\n  if (typeof labelClassName === 'function') {\n    labelClassName = labelClassName(data)\n  }\n  labelClassName && cls.push(labelClassName)\n\n  return h('div', {\n    domProps: {\n      className: 'org-tree-node-label'\n    }\n  }, [h('div', {\n    domProps: {\n      className: cls.join(' ')\n    },\n    style: { width: labelWidth },\n    on: {\n      click: e => clickHandler && clickHandler(e, data)\n    }\n  }, childNodes)])\n}\n\n// 创建 node 子节点\nexport const renderChildren = (h, list, context) => {\n  if (Array.isArray(list) && list.length) {\n    const children = list.map(item => {\n      return renderNode(h, item, context)\n    })\n\n    return h('div', {\n      domProps: {\n        className: 'org-tree-node-children'\n      }\n    }, children)\n  }\n  return ''\n}\n\nexport const render = (h, context) => {\n  const { props } = context\n  return renderNode(h, props.data, context)\n}\n\nexport default render\n"]}]}